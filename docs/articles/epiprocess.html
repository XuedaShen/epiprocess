<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with `epiprocess` • epiprocess</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with `epiprocess`">
<meta property="og:description" content="epiprocess">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epiprocess</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/epiprocess.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/slide.html">Slide a computation over signal values</a>
    </li>
    <li>
      <a href="../articles/growth_rate.html">Estimate growth rates in signals</a>
    </li>
    <li>
      <a href="../articles/correlation.html">Correlate signals over space and time</a>
    </li>
    <li>
      <a href="../articles/aggregation.html">Aggregate signals over space and time</a>
    </li>
    <li>
      <a href="../articles/outliers.html">Detect and correct outliers in signals</a>
    </li>
    <li>
      <a href="../articles/archive.html">Work with archive objects and data revisions</a>
    </li>
    <li>
      <a href="../articles/advanced.html">Advanced sliding with nonstandard outputs</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cmu-delphi/epiprocess/tree/main/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="epiprocess_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started with <code>epiprocess</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cmu-delphi/epiprocess/blob/main/vignettes/epiprocess.Rmd"><code>vignettes/epiprocess.Rmd</code></a></small>
      <div class="hidden name"><code>epiprocess.Rmd</code></div>

    </div>

    
    
<p>This package introduces a common data structure for epidemiological data sets measured over space and time, and offers associated utilities to perform basic signal processing tasks.</p>
<div id="installing" class="section level2">
<h2 class="hasAnchor">
<a href="#installing" class="anchor"></a>Installing</h2>
<p>This package is not on CRAN yet, so it can be installed using the <a href="https://devtools.r-lib.org"><code>devtools</code></a> package:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html">install_github</a></span>(<span class="st">"cmu-delphi/epiprocess"</span>, <span class="kw">ref</span> <span class="kw">=</span> <span class="st">"main"</span>)</pre></body></html></div>
<p>Building the vignettes, such as this getting started guide, takes a significant amount of time. They are not included in the package by default. If you want to include vignettes, then use this modified command:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html">install_github</a></span>(<span class="st">"cmu-delphi/epiprocess"</span>, <span class="kw">ref</span> <span class="kw">=</span> <span class="st">"main"</span>,
                         <span class="kw">build_vignettes</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">dependencies</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
</div>
<div id="getting-data-into-epi_df-format" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-data-into-epi_df-format" class="anchor"></a>Getting data into <code>epi_df</code> format</h2>
<p>We’ll start by showing how to get data into <code><a href="../reference/epi_df.html">epi_df</a></code> format, which is just a tibble with a bit of special structure, and is the format assumed by all of the functions in the <code>epiprocess</code> package. An <code>epi_df</code> object has (at least) the following columns:</p>
<ul>
<li>
<code>geo_value</code>: the geographic value associated with each row of measurements.</li>
<li>
<code>time_value</code>: the time value associated with each row of measurements.</li>
</ul>
<p>It can have any number of other columns which can serve as measured variables, which we also broadly refer to as signal variables. The documentation for gives more details about this data format.</p>
<p>A data frame or tibble that has <code>geo_value</code> and <code>time_value</code> columns can be converted into an <code>epi_df</code> object, using the function <code><a href="../reference/as_epi_df.html">as_epi_df()</a></code>. As an example, we’ll work with daily cumulative COVID-19 cases from four U.S. states: CA, FL, NY, and TX, over time span from mid 2020 to early 2022, and we’ll use the <a href="https://cmu-delphi.github.io/covidcast/covidcastR/"><code>covidcast</code></a> package to fetch this data from the <a href="https://cmu-delphi.github.io/delphi-epidata/api/covidcast.html/">COVIDcast API</a>.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">covidcast</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">epiprocess</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)

<span class="no">cases</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/covidcast/man/covidcast_signal.html">covidcast_signal</a></span>(<span class="kw">data_source</span> <span class="kw">=</span> <span class="st">"jhu-csse"</span>,
                          <span class="kw">signal</span> <span class="kw">=</span> <span class="st">"confirmed_cumulative_num"</span>,
                          <span class="kw">start_day</span> <span class="kw">=</span> <span class="st">"2020-03-01"</span>,
                          <span class="kw">end_day</span> <span class="kw">=</span> <span class="st">"2022-01-31"</span>,
                          <span class="kw">geo_type</span> <span class="kw">=</span> <span class="st">"state"</span>,
                          <span class="kw">geo_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"ca"</span>, <span class="st">"fl"</span>, <span class="st">"ny"</span>, <span class="st">"tx"</span>))

<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">cases</span>)</pre></body></html></div>
<pre><code>##  [1] "data_source"         "signal"              "geo_value"          
##  [4] "time_value"          "source"              "geo_type"           
##  [7] "time_type"           "issue"               "lag"                
## [10] "missing_value"       "missing_stderr"      "missing_sample_size"
## [13] "value"               "stderr"              "sample_size"</code></pre>
<p>As we can see, a data frame returned by <code><a href="https://rdrr.io/pkg/covidcast/man/covidcast_signal.html">covidcast::covidcast_signal()</a></code> has the columns required for an <code>epi_df</code> object (along with many others). We can use <code><a href="../reference/as_epi_df.html">as_epi_df()</a></code>, with specification of some relevant metadata, to bring the data frame into <code>epi_df</code> format.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/as_epi_df.html">as_epi_df</a></span>(<span class="no">cases</span>,
               <span class="kw">geo_type</span> <span class="kw">=</span> <span class="st">"state"</span>,
               <span class="kw">time_type</span> <span class="kw">=</span> <span class="st">"day"</span>,
               <span class="kw">as_of</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">cases</span>$<span class="no">issue</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">geo_value</span>, <span class="no">time_value</span>, <span class="kw">total_cases</span> <span class="kw">=</span> <span class="no">value</span>)

<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">x</span>)</pre></body></html></div>
<pre><code>## [1] "epi_df"     "tbl_df"     "tbl"        "data.frame"</code></pre>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="no">x</span>)</pre></body></html></div>
<pre><code>## An `epi_df` x, with metadata:
## * geo_type  = state
## * time_type = day
## * as_of     = 2022-02-19
## ----------
## * min time value              = 2020-03-01
## * max time value              = 2022-01-31
## * average rows per time value = 4</code></pre>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">x</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 × 3
##   geo_value time_value total_cases
##   &lt;chr&gt;     &lt;date&gt;           &lt;dbl&gt;
## 1 ca        2020-03-01          19
## 2 fl        2020-03-01           0
## 3 ny        2020-03-01           0
## 4 tx        2020-03-01           0
## 5 ca        2020-03-02          23
## 6 fl        2020-03-02           1</code></pre>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span>(<span class="no">x</span>)$<span class="no">metadata</span></pre></body></html></div>
<pre><code>## $geo_type
## [1] "state"
## 
## $time_type
## [1] "day"
## 
## $as_of
## [1] "2022-02-19"</code></pre>
</div>
<div id="some-details-on-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#some-details-on-metadata" class="anchor"></a>Some details on metadata</h2>
<p>In general, an <code>epi_df</code> object has the following fields in its metadata:</p>
<ul>
<li>
<code>geo_type</code>: the type for the geo values.</li>
<li>
<code>time_type</code>: the type for the time values.</li>
<li>
<code>as_of</code>: the time value at which the given data were available.</li>
</ul>
<p>Metadata for an <code>epi_df</code> object <code>x</code> can be accessed (and altered) via <code>attributes(x)$metadata</code>. The first two fields here, <code>geo_type</code> and <code>time_type</code>, are not currently used by any downstream functions in the <code>epiprocess</code> package, and serve only as useful bits of information to convey about the data set at hand. The last field here, <code>as_of</code>, is one of the most unique aspects of an <code>epi_df</code> object.</p>
<p>In brief, we can think of an <code>epi_df</code> object as a single snapshot of a data set that contains the most up-to-date values of some signals of interest, as of the time specified <code>as_of</code>. For example, if <code>as_of</code> is January 31, 2022, then the <code>epi_df</code> object has the most up-to-date version of the data available as of January 31, 2022. The <code>epiprocess</code> package also provides a companion data structure called <code>epi_archive</code>, which stores the full version history of a given data set. See the <a href="https://cmu-delphi.github.io/epiprocess/articles/archive.html">archive vignette</a> for more.</p>
<p>If any of the <code>geo_type</code>, <code>time_type</code>, or <code>as_of</code> arguments are missing in a call to <code><a href="../reference/as_epi_df.html">as_epi_df()</a></code>, then this function will try to infer them from the passed object. Usually, <code>geo_type</code> and <code>time_type</code> can be inferred from the <code>geo_value</code> and <code>time_value</code> columns, respectively, but inferring the <code>as_of</code> field is not as easy. See the documentation for <code><a href="../reference/as_epi_df.html">as_epi_df()</a></code> more details.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">x</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/as_epi_df.html">as_epi_df</a></span>(<span class="no">cases</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">geo_value</span>, <span class="no">time_value</span>, <span class="kw">total_cases</span> <span class="kw">=</span> <span class="no">value</span>)

<span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span>(<span class="no">x</span>)$<span class="no">metadata</span></pre></body></html></div>
<pre><code>## $geo_type
## [1] "state"
## 
## $time_type
## [1] "day"
## 
## $as_of
## [1] "2022-02-19"</code></pre>
</div>
<div id="working-with-epi_df-objects-downstream" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-epi_df-objects-downstream" class="anchor"></a>Working with <code>epi_df</code> objects downstream</h2>
<p>Data in <code>epi_df</code> format should be easy to work with downstream, since it is a very standard tabular data format; in the other vignettes, we’ll walk through some basic signal processing tasks using functions provided in the <code>epiprocess</code> package. Of course, we can also write custom code for other downstream uses, like plotting, which is pretty easy to do <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html">theme_set</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span>())

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">time_value</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">total_cases</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">geo_value</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span>(<span class="kw">minor_breaks</span> <span class="kw">=</span> <span class="st">"month"</span>, <span class="kw">date_labels</span> <span class="kw">=</span> <span class="st">"%b %y"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Date"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"Cumulative COVID-19 cases"</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"State"</span>)</pre></body></html></div>
<p><img src="epiprocess_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>As a last couple examples, we’ll look at some more data sets just to show how we might get them into <code>epi_df</code> format. Data on daily new (not cumulative) SARS cases in Canada in 2003, from the <a href="https://github.com/reconverse/outbreaks">outbreaks</a> package:</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">x</span> <span class="kw">&lt;-</span> <span class="kw pkg">outbreaks</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/outbreaks/man/sars_canada_2003.html">sars_canada_2003</a></span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">geo_value</span> <span class="kw">=</span> <span class="st">"ca"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">geo_value</span>, <span class="kw">time_value</span> <span class="kw">=</span> <span class="no">date</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">starts_with</a></span>(<span class="st">"cases"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/as_epi_df.html">as_epi_df</a></span>(<span class="kw">geo_type</span> <span class="kw">=</span> <span class="st">"nation"</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">x</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 × 6
##   geo_value time_value cases_travel cases_household cases_healthcare cases_other
##   &lt;chr&gt;     &lt;date&gt;            &lt;int&gt;           &lt;int&gt;            &lt;int&gt;       &lt;int&gt;
## 1 ca        2003-02-23            1               0                0           0
## 2 ca        2003-02-24            0               0                0           0
## 3 ca        2003-02-25            0               0                0           0
## 4 ca        2003-02-26            0               1                0           0
## 5 ca        2003-02-27            0               0                0           0
## 6 ca        2003-02-28            1               0                0           0</code></pre>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyr</span>)
<span class="no">x</span> <span class="kw">&lt;-</span> <span class="no">x</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span>(<span class="fu"><a href="https://tidyr.tidyverse.org/reference/reexports.html">starts_with</a></span>(<span class="st">"cases"</span>), <span class="kw">names_to</span> <span class="kw">=</span> <span class="st">"type"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html">substring</a></span>(<span class="no">type</span>, <span class="fl">7</span>))

<span class="no">yrange</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span>(<span class="no">x</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">time_value</span>) <span class="kw">%&gt;%</span>
                  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span>(<span class="kw">value</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">value</span>)) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">value</span>))

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">time_value</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">value</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="no">type</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span>(<span class="kw">minor_breaks</span> <span class="kw">=</span> <span class="st">"month"</span>, <span class="kw">date_labels</span> <span class="kw">=</span> <span class="st">"%b %y"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(<span class="kw">breaks</span> <span class="kw">=</span> <span class="no">yrange</span>[<span class="fl">1</span>]:<span class="no">yrange</span>[<span class="fl">2</span>]) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Date"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"SARS cases in Canada"</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="st">"Type"</span>)</pre></body></html></div>
<p><img src="epiprocess_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Data on new cases of Ebola in Sierra Leone in 2014, from the same package:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="no">x</span> <span class="kw">&lt;-</span> <span class="kw pkg">outbreaks</span><span class="kw ns">::</span><span class="no"><a href="https://rdrr.io/pkg/outbreaks/man/ebola_sierraleone_2014.html">ebola_sierraleone_2014</a></span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(
    <span class="kw">cases</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span>(<span class="no">status</span> <span class="kw">==</span> <span class="st">"confirmed"</span>, <span class="fl">1</span>, <span class="fl">0</span>),
    <span class="kw">province</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span>(
      <span class="no">district</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Kailahun"</span>, <span class="st">"Kenema"</span>, <span class="st">"Kono"</span>) ~ <span class="st">"Eastern"</span>,
      <span class="no">district</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Bombali"</span>, <span class="st">"Kambia"</span>, <span class="st">"Koinadugu"</span>,
                      <span class="st">"Port Loko"</span>, <span class="st">"Tonkolili"</span>) ~ <span class="st">"Northern"</span>,
      <span class="no">district</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Bo"</span>, <span class="st">"Bonthe"</span>, <span class="st">"Moyamba"</span>, <span class="st">"Pujehun"</span>) ~ <span class="st">"Sourthern"</span>,
      <span class="no">district</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Western Rural"</span>, <span class="st">"Western Urban"</span>) ~ <span class="st">"Western"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">geo_value</span> <span class="kw">=</span> <span class="no">province</span>,
         <span class="kw">time_value</span> <span class="kw">=</span> <span class="no">date_of_onset</span>,
         <span class="no">cases</span>) <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">cases</span><span class="kw">==</span><span class="fl">1</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">geo_value</span>, <span class="no">time_value</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="kw">cases</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="no">cases</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/as_epi_df.html">as_epi_df</a></span>(<span class="kw">geo_type</span><span class="kw">=</span><span class="st">"province"</span>)

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="no">x</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">time_value</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">cases</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="no">geo_value</span>), <span class="kw">show.legend</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(~ <span class="no">geo_value</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free_y"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span>(<span class="kw">minor_breaks</span> <span class="kw">=</span> <span class="st">"month"</span>, <span class="kw">date_labels</span> <span class="kw">=</span> <span class="st">"%b %y"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="st">"Date"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"Confirmed cases of Ebola in Sierra Leone"</span>)</pre></body></html></div>
<p><img src="epiprocess_files/figure-html/unnamed-chunk-8-1.png" width="864"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Logan Brooks, Evan Ray, Ryan Tibshirani.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
