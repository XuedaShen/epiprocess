<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Slides a given function over variables in an epi_df object. See the slide vignette for
examples."><title>Slide a function over variables in an epi_df object — epi_slide • epiprocess</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Slide a function over variables in an epi_df object — epi_slide"><meta property="og:description" content="Slides a given function over variables in an epi_df object. See the slide vignette for
examples."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epiprocess</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/epiprocess.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/slide.html">Slide a computation over signal values</a>
    <a class="dropdown-item" href="../articles/growth_rate.html">Estimate growth rates in signals</a>
    <a class="dropdown-item" href="../articles/correlation.html">Correlate signals over space and time</a>
    <a class="dropdown-item" href="../articles/aggregation.html">Aggregate signals over space and time</a>
    <a class="dropdown-item" href="../articles/outliers.html">Detect and correct outliers in signals</a>
    <a class="dropdown-item" href="../articles/archive.html">Work with archive objects and data revisions</a>
    <a class="dropdown-item" href="../articles/advanced.html">Advanced sliding with nonstandard outputs</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cmu-delphi/epiprocess/tree/main/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Slide a function over variables in an <code>epi_df</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/cmu-delphi/epiprocess/blob/main/R/slide.R" class="external-link"><code>R/slide.R</code></a></small>
      <div class="d-none name"><code>epi_slide.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Slides a given function over variables in an <code>epi_df</code> object. See the <a href="https://cmu-delphi.github.io/epiprocess/articles/slide.html">slide vignette</a> for
examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">epi_slide</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">f</span>,
  <span class="va">...</span>,
  n <span class="op">=</span> <span class="fl">7</span>,
  <span class="va">ref_time_values</span>,
  align <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"right"</span>, <span class="st">"center"</span>, <span class="st">"left"</span><span class="op">)</span>,
  <span class="va">before</span>,
  <span class="va">time_step</span>,
  new_col_name <span class="op">=</span> <span class="st">"slide_value"</span>,
  as_list_col <span class="op">=</span> <span class="cn">FALSE</span>,
  names_sep <span class="op">=</span> <span class="st">"_"</span>,
  all_rows <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>The <code>epi_df</code> object under consideration.</p></dd>


<dt>f</dt>
<dd><p>Function or formula to slide over variables in <code>x</code>. To "slide" means
to apply a function or formula over a running window of <code>n</code> time steps
(where one time step is typically one day or one week; see details for more
explanation). If a function, <code>f</code> must take <code>x</code>, a data frame with the same
column names as the original object; followed by any number of named
arguments; and ending with <code>...</code>. If a formula, <code>f</code> can operate directly on
columns accessed via <code>.x$var</code>, as in <code>~ mean(.x$var)</code> to compute a mean of
a column <code>var</code> over a sliding window of <code>n</code> time steps.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments to pass to the function or formula specified
via <code>f</code>. Alternatively, if <code>f</code> is missing, then the current argument is
interpreted as an expression for tidy evaluation. See details.</p></dd>


<dt>n</dt>
<dd><p>Number of time steps to use in the running window. For example, if
<code>n = 7</code>, one time step is one day, and the alignment is "right", then to
produce a value on January 7 we apply the given function or formula to data
in between January 1 and 7. Default is 7.</p></dd>


<dt>ref_time_values</dt>
<dd><p>Time values for sliding computations, meaning, each
element of this vector serves as the reference time point for one sliding
window. If missing, then this will be set to all unique time values in the
underlying data table, by default.</p></dd>


<dt>align</dt>
<dd><p>One of "right", "center", or "left", indicating the alignment of
the sliding window relative to the reference time point. If the alignment
is "center" and <code>n</code> is even, then one more time point will be used after
the reference time point than before. Default is "right".</p></dd>


<dt>before</dt>
<dd><p>Positive integer less than <code>n</code>, specifying the number of time
points to use in the sliding window strictly before the reference time
point. For example, setting <code>before = n-1</code> would be the same as setting
<code>align = "right"</code>. The <code>before</code> argument allows for more flexible
specification of alignment than the <code>align</code> parameter, and if specified,
overrides <code>align</code>.</p></dd>


<dt>time_step</dt>
<dd><p>Optional function used to define the meaning of one time
step, which if specified, overrides the default choice based on the
<code>time_value</code> column. This function must take a positive integer and return
an object of class <code><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">lubridate::period</a></code>. For example, we can use <code>time_step = lubridate::hours</code> in order to set the time step to be one hour (this
would only be meaningful if <code>time_value</code> is of class <code>POSIXct</code>).</p></dd>


<dt>new_col_name</dt>
<dd><p>String indicating the name of the new column that will
contain the derivative values. Default is "slide_value"; note that setting
<code>new_col_name</code> equal to an existing column name will overwrite this column.</p></dd>


<dt>as_list_col</dt>
<dd><p>Should the new column be stored as a list column? Default
is <code>FALSE</code>, in which case a list object returned by <code>f</code> would be unnested
(using <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::unnest()</a></code>), and the names of the resulting columns are given
by prepending <code>new_col_name</code> to the names of the list elements.</p></dd>


<dt>names_sep</dt>
<dd><p>String specifying the separator to use in <code><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">tidyr::unnest()</a></code>
when <code>as_list_col = FALSE</code>. Default is "_". Using <code>NULL</code> drops the prefix
from <code>new_col_name</code> entirely.</p></dd>


<dt>all_rows</dt>
<dd><p>If <code>all_rows = TRUE</code>, then all rows of <code>x</code> will be kept in
the output; otherwise, there will be one row for each time value in <code>x</code>
that acts as a reference time value. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An <code>epi_df</code> object given by appending a new column to <code>x</code>, named
according to the <code>new_col_name</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>To "slide" means to apply a function or formula over a running
window of <code>n</code> time steps, where the unit (the meaning of one time step) is
implicitly defined by the way the <code>time_value</code> column treats addition and
subtraction; for example, if the time values are coded as <code>Date</code> objects,
then one time step is one day, since <code>as.Date("2022-01-01") + 1</code> equals
<code>as.Date("2022-01-02")</code>. Alternatively, the time step can be set explicitly
using the <code>time_step</code> argument (which if specified would override the
default choice based on <code>time_value</code> column). If less than <code>n</code> time steps
are available at any given reference time value, then <code>epi_slide()</code> still
attempts to perform the computation anyway (it does not require a complete
window). The issue of what to do with partial computations (those run on
incomplete windows) is therefore left up to the user, either through the
specified function or formula <code>f</code>, or through post-processing.</p>
<p>If <code>f</code> is missing, then an expression for tidy evaluation can be specified,
for example, as in:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">epi_slide</span>(x, <span class="dt">cases_7dav =</span> <span class="kw">mean</span>(cases), <span class="dt">n =</span> <span class="dv">7</span>)</span></code></pre><p></p></div>
<p>which would be equivalent to:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">epi_slide</span>(x, <span class="cf">function</span>(x, ...) <span class="kw">mean</span>(x<span class="op">$</span>cases), <span class="dt">n =</span> <span class="dv">7</span>,</span>
<span id="cb1-2"><a href="#cb1-2"></a>          <span class="dt">new_col_name =</span> <span class="st">"cases_7dav"</span>)</span></code></pre><p></p></div>
<p>Thus, to be clear, when the computation is specified via an expression for
tidy evaluation (first example, above), then the name for the new column is
inferred from the given expression and overrides any name passed explicitly
through the <code>new_col_name</code> argument.</p>
<p>When <code>f</code> is a named function with arguments, if a tibble with an unnamed
grouping variable is passed in as the method argument to <code>f</code>, include a
parameter for the grouping-variable in <code>function()</code> just prior to
specifying the method to prevent that from being overridden. For example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Construct an tibble with an unnamed grouping variable</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>edf =<span class="st"> </span><span class="kw">bind_rows</span>(<span class="kw">tibble</span>(<span class="dt">geo_value =</span> <span class="st">"ak"</span>, <span class="dt">time_value =</span> <span class="kw">as.Date</span>(<span class="st">"2020-01-01"</span>) </span>
<span id="cb1-3"><a href="#cb1-3"></a>          <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">x1=</span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">y=</span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(10L))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="st">  </span><span class="kw">as_epi_df</span>()</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># Now, include a row parameter for the grouping variable in the tibble, </span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># which we denote as g, just prior to method = "qr"</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Note that if g was not included below, then the method = "qr" would be </span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co"># overridden, as described above</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>edf <span class="op">%&gt;%</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="kw">group_by</span>(geo_value) <span class="op">%&gt;%</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="kw">epi_slide</span>(<span class="cf">function</span>(x, g, <span class="dt">method=</span><span class="st">"qr"</span>, ...) <span class="kw">tibble</span>(<span class="dt">model=</span><span class="kw">list</span>(</span>
<span id="cb1-13"><a href="#cb1-13"></a>          <span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x1, x, <span class="dt">method=</span>method))), <span class="dt">n=</span>7L) </span></code></pre><p></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"> <span class="co"># slide a 7-day trailing average formula on cases</span></span>
<span class="r-in">  <span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">epi_slide</span><span class="op">(</span>cases_7dav <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cases</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">7</span>, </span>
<span class="r-in">            align <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span>
<span class="r-in">  <span class="co"># rmv a nonessential var. to ensure new col is printed</span></span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">death_rate_7d_av</span><span class="op">)</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   geo_value [6]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value case_rate_7d_av cases cases_7d_av cases_7dav</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01         0.003<span style="text-decoration: underline;">27</span>     6        1.29       6   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02         0.004<span style="text-decoration: underline;">35</span>     4        1.71       5   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03         0.006<span style="text-decoration: underline;">17</span>     6        2.43       5.33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04         0.009<span style="text-decoration: underline;">80</span>    11        3.86       6.75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05         0.013<span style="text-decoration: underline;">4</span>     10        5.29       7.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06         0.020<span style="text-decoration: underline;">0</span>     18        7.86       9.17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07         0.029<span style="text-decoration: underline;">4</span>     26       11.6       11.6 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08         0.034<span style="text-decoration: underline;">1</span>     19       13.4       13.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09         0.041<span style="text-decoration: underline;">0</span>     23       16.1       16.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10         0.046<span style="text-decoration: underline;">8</span>     22       18.4       18.4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 4,016 more rows</span></span>
<span class="r-in"> </span>
<span class="r-in"> <span class="co"># slide a left-aligned 7-day average</span></span>
<span class="r-in">  <span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">epi_slide</span><span class="op">(</span>cases_7dav <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cases</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">7</span>, </span>
<span class="r-in">            align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span>
<span class="r-in">  <span class="co"># rmv a nonessential var. to ensure new col is printed</span></span>
<span class="r-in">  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">death_rate_7d_av</span><span class="op">)</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   geo_value [6]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value case_rate_7d_av cases cases_7d_av cases_7dav</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01         0.003<span style="text-decoration: underline;">27</span>     6        1.29       11.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02         0.004<span style="text-decoration: underline;">35</span>     4        1.71       13.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03         0.006<span style="text-decoration: underline;">17</span>     6        2.43       16.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04         0.009<span style="text-decoration: underline;">80</span>    11        3.86       18.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05         0.013<span style="text-decoration: underline;">4</span>     10        5.29       20.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06         0.020<span style="text-decoration: underline;">0</span>     18        7.86       25.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07         0.029<span style="text-decoration: underline;">4</span>     26       11.6        30.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08         0.034<span style="text-decoration: underline;">1</span>     19       13.4        34.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09         0.041<span style="text-decoration: underline;">0</span>     23       16.1        37.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10         0.046<span style="text-decoration: underline;">8</span>     22       18.4        56.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 4,016 more rows</span></span>
<span class="r-in"> </span>
<span class="r-in"> <span class="co"># nested new columns</span></span>
<span class="r-in"> <span class="va">jhu_csse_daily_subset</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span>
<span class="r-in"> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_value</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in"> <span class="fu">epi_slide</span><span class="op">(</span>a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>cases_2dav <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cases</span><span class="op">)</span>, </span>
<span class="r-in">                          cases_2dma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/mad.html" class="external-link">mad</a></span><span class="op">(</span><span class="va">cases</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">           n <span class="op">=</span> <span class="fl">2</span>, as_list_col <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An `epi_df` object, 4,026 x 7 with metadata:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * geo_type  = state</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * time_type = day</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * as_of     = 2022-05-23 20:17:07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4,026 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># Groups:   geo_value [6]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    geo_value time_value case_rate_7d_av death_rate_7d_av cases cases_7d_av a    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lis&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ca        2020-03-01         0.003<span style="text-decoration: underline;">27</span>         0            6        1.29 &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ca        2020-03-02         0.004<span style="text-decoration: underline;">35</span>         0            4        1.71 &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ca        2020-03-03         0.006<span style="text-decoration: underline;">17</span>         0            6        2.43 &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ca        2020-03-04         0.009<span style="text-decoration: underline;">80</span>         0.000<span style="text-decoration: underline;">363</span>    11        3.86 &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ca        2020-03-05         0.013<span style="text-decoration: underline;">4</span>          0.000<span style="text-decoration: underline;">363</span>    10        5.29 &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ca        2020-03-06         0.020<span style="text-decoration: underline;">0</span>          0.000<span style="text-decoration: underline;">363</span>    18        7.86 &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ca        2020-03-07         0.029<span style="text-decoration: underline;">4</span>          0.000<span style="text-decoration: underline;">363</span>    26       11.6  &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ca        2020-03-08         0.034<span style="text-decoration: underline;">1</span>          0.000<span style="text-decoration: underline;">363</span>    19       13.4  &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ca        2020-03-09         0.041<span style="text-decoration: underline;">0</span>          0.000<span style="text-decoration: underline;">726</span>    23       16.1  &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ca        2020-03-10         0.046<span style="text-decoration: underline;">8</span>          0.000<span style="text-decoration: underline;">726</span>    22       18.4  &lt;df&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 4,016 more rows</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Logan Brooks, Daniel McDonald, Evan Ray, Ryan Tibshirani.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer></div>

  

  

  </body></html>

